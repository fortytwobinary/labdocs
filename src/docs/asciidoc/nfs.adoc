Network File System
===================
FortyTwoBinary Team
:description: installation reference
:toc: left
:icons: font
:stylesheet: italian-pop.css
:docinfo: shared
:numbered:
:website: https://fortytwobinary.com/
:author: David L. Whitehurst

image:files.jpg["Files"]

{endpoint-url}/welcome.html[home]

image:vy.png["Company Logo",height=32]

Welcome to the FortyTwoBinary service documentation for the Network File System (NFS) on multiple platforms. This document is subject to great change and will
be maintained in a software repository https://github.com/fortytwobinary/labdocs[here].

[WARNING]
This {description} was drafted and is maintained as a DevOps reference to the work that occurs on the FortyTwoBinary network and infrastructure. The
powerful command-line instructions found here, may or may not be accurate
or timely. This warning is given to let the DevOp be aware that commands
may not be idempotent and before root-level (sudo) actions are taken, to
please think twice before hitting the Enter key.

.This document
**********************************************************************
This document was written using asciidoc markup and the HTML you see is
generated by a tool driven using Python called asciidoctor. This
{description} is a powerful document that can be of great value in the event of data loss, machine crashes, backups, maintenance, installations, and troubleshooting.
**********************************************************************

Introduction
------------
Network File System (NFS) is a distributed file system protocol originally developed by Sun Microsystems (Sun) in 1984 <<sandberg-goldberg-kleiman-walsh-lyon>> NFS allows the actual file system to reside on a single machine and then share the file system path across multiple machines.

The master node of the Pi tower "Frankie" hosts a 500 GB USB external G-Technology drive at `/mnt/ext`. This
filesystem is then exported to the other nodes as NFS clients.

.My Goal for NFS
**********************************************************************
Since each of the Kubernetes nodes form a cluster of similar computers,
each node needs a similar filesystem storage path (shared). The NFS mount
will be used for Persistent Volumes and Claims for K8s hostings. Any
machine will be able to send data to the Persistent Volume and subsequently
the filesystem path (shared) regardless of the worker sending the data.
**********************************************************************

Preliminaries
-------------

Goal
~~~~
The goal here is to install and maintain an NFS mount (server) on our Kubernetes
cluster master node and share that mount (clients) on all worker nodes.

Platforms
~~~~~~~~~
NFS server and client software will be installed on arm64 Ubuntu 20.04 LTS.

Dependencies
~~~~~~~~~~~~
- Server with arm64 Ubuntu 20.04 LTS and physical volume
- Client hosts with arm64 Ubuntu 20.04

NFS Server Installation
-----------------------
Text here ...

TIP: Download the Vault binary for Raspberry Pi 4 Model B here: https://releases.hashicorp.com/vault/1.6.2/vault_1.6.2_linux_arm.zip[https://releases.hashicorp.com/vault/1.6.2/vault_1.6.2_linux_arm.zip]

NFS Client Installation
-----------------------
Text here ...

TIP: Download the Vault binary for Raspberry Pi 4 Model B here: https://releases.hashicorp.com/vault/1.6.2/vault_1.6.2_linux_arm.zip[https://releases.hashicorp.com/vault/1.6.2/vault_1.6.2_linux_arm.zip]

[WARNING]
Do NOT download the ARM64 edition for Linux. It will NOT run on the Raspberry Pi 4 Model B using Raspbian (Debian 10 Buster) as of February 27, 2021. This message is HIGHLY subject to CHANGE.

Unzip the download somewhere and we moved the file `vault` to `<user-home>/bin` Then we added the following to our `.bashrc` and sourced it instead of logging out and back in.

[source,bash]
----
export PATH=/home/pi/bin:$PATH
----
Now our user (pi) can execute the vault program from anywhere. The only
caveat is that with the command, a configuration is needed. Let's create
the configuration for Vault in the user's home directory. We'll then run
the executable and discuss optimum configuration in the <<X5>>
section below.

Configuration
~~~~~~~~~~~~~
Hashicorp Vault can be configured using JSON or <<X900>>. We chose to use
JSON only for familiarity. Create a file called `vault-config.json` in the
user's home directory and add this content:

[source,json]
----
{
  "backend": {
    "file": {
      "path": "vault/data"
    }
  },
  "listener": {
    "tcp":{
      "address": "0.0.0.0:8200",
      "tls_disable": 1
    }
  },
  "ui": true
}
----
Take note that the path `vault/data` will be relative to where the vault
executable is run. We will issue the command from the user's home directory
and where this configuration file currently resides. Also the `0.0.0.0` in
the listener section is a placeholder that defines a non-routable IP address. It has been explained to mean "all addresses". Learn more here:
https://en.wikipedia.org/wiki/0.0.0.0[https://en.wikipedia.org/wiki/0.0.0.0]. The 8200 port is the Hashicorp Vault default.

[WARNING]
Please note that HTTPS is not being used. This is NOT good practice however, final software configuration may occur within the FortyTwoBinary
network (internal) or in the event all configuration is moved onto the
public Internet.

Startup
~~~~~~~
N/A

Administration
--------------
The full administration and use of Docker is yet to be discovered. For now
we'll provide some cheatsheet commands and a few use cases.

Common Commands
~~~~~~~~~~~~~~~
Later ... you are welcome lol ...

[source,bash]
----
$ docker ps
----

:numbered!:

Bibliography
------------

[bibliography]

- [[[sandberg-goldberg-kleiman-walsh-lyon]]] Russel Sandberg; David Goldberg; Steve Kleiman; Dan Walsh; Bob Lyon (1985). 'Design and Implementation of the Sun Network Filesystem'. USENIX. CiteSeerX 10.1.1.14.473.

[appendix]
License
-------
This document is licensed by the Apache License version 2.0. Currently,
the content in this document is being kept from the public however, in
the event the material contained here is willingly shared with
others, the license will remain unchanged and will convey with the
transference of the material.

Apache License
Version 2.0, January 2004
http://www.apache.org/licenses/

A copy has also been provided with this software repository.

Copyright (C) 2021 David L Whitehurst.


